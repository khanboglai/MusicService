2025-05-19 09:38:52,923 - uvicorn.error - [INFO] - Started server process [8]
2025-05-19 09:38:52,923 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 09:38:52,923 - src.common.core.logging - [INFO] - start app
2025-05-19 09:38:52,976 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 09:38:52,976 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 09:38:52,977 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 09:38:52,977 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 09:38:52,978 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 09:38:52,979 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 09:38:52,979 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 09:38:52,982 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:38:52,982 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00023s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:38:52,987 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:38:52,987 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004426s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:38:52,987 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:38:52,987 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005168s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:38:52,988 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:38:52,988 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005734s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:38:52,988 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 09:38:52,994 - uvicorn.error - [ERROR] - Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 692, in lifespan
    async with self.lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
               ~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/main.py", line 19, in lifespan
    await start_mapping()
  File "/src/src/common/database/models.py", line 84, in start_mapping
    await conn.run_sync(mapper_registry.metadata.create_all)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/engine.py", line 887, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
        fn, self._proxied, *arg, _require_await=False, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/schema.py", line 5925, in create_all
    bind._run_ddl_visitor(
    ~~~~~~~~~~~~~~~~~~~~~^
        ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2456, in _run_ddl_visitor
    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/visitors.py", line 664, in traverse_single
    return meth(obj, **kw)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/ddl.py", line 959, in visit_metadata
    collection = sort_tables_and_constraints(
        [t for t in tables if self._can_create_table(t)]
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/ddl.py", line 1391, in sort_tables_and_constraints
    dependent_on = fkc.referred_table
                   ^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/schema.py", line 4800, in referred_table
    return self.elements[0].column.table
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 1145, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/schema.py", line 3200, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/schema.py", line 3239, in _resolve_column
    return self._link_to_col_by_colstring(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        parenttable, table, colname
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/schema.py", line 3161, in _link_to_col_by_colstring
    raise exc.NoReferencedColumnError(
    ...<6 lines>...
    )
sqlalchemy.exc.NoReferencedColumnError: Could not initialize target column for ForeignKey 'albums.id' on table 'tracks': table 'albums' has no column named 'id'

2025-05-19 09:38:52,994 - uvicorn.error - [ERROR] - Application startup failed. Exiting.
2025-05-19 09:40:25,755 - uvicorn.error - [INFO] - Started server process [11]
2025-05-19 09:40:25,755 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 09:40:25,756 - src.common.core.logging - [INFO] - start app
2025-05-19 09:40:25,800 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 09:40:25,800 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 09:40:25,801 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 09:40:25,801 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 09:40:25,802 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 09:40:25,802 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 09:40:25,803 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 09:40:25,806 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:40:25,807 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00028s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:40:25,809 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:40:25,809 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.002442s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:40:25,809 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:40:25,809 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.002975s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:40:25,810 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:40:25,810 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003464s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:40:25,810 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 09:40:25,816 - uvicorn.error - [ERROR] - Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 692, in lifespan
    async with self.lifespan_context(app) as maybe_state:
               ~~~~~~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 133, in merged_lifespan
    async with original_context(app) as maybe_original_state:
               ~~~~~~~~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.13/contextlib.py", line 214, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/main.py", line 19, in lifespan
    await start_mapping()
  File "/src/src/common/database/models.py", line 84, in start_mapping
    await conn.run_sync(mapper_registry.metadata.create_all)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/engine.py", line 887, in run_sync
    return await greenlet_spawn(
           ^^^^^^^^^^^^^^^^^^^^^
        fn, self._proxied, *arg, _require_await=False, **kw
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/schema.py", line 5925, in create_all
    bind._run_ddl_visitor(
    ~~~~~~~~~~~~~~~~~~~~~^
        ddl.SchemaGenerator, self, checkfirst=checkfirst, tables=tables
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2456, in _run_ddl_visitor
    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/visitors.py", line 664, in traverse_single
    return meth(obj, **kw)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/ddl.py", line 959, in visit_metadata
    collection = sort_tables_and_constraints(
        [t for t in tables if self._can_create_table(t)]
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/ddl.py", line 1391, in sort_tables_and_constraints
    dependent_on = fkc.referred_table
                   ^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/schema.py", line 4800, in referred_table
    return self.elements[0].column.table
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 1145, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/schema.py", line 3200, in column
    return self._resolve_column()
           ~~~~~~~~~~~~~~~~~~~~^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/schema.py", line 3239, in _resolve_column
    return self._link_to_col_by_colstring(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        parenttable, table, colname
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/schema.py", line 3161, in _link_to_col_by_colstring
    raise exc.NoReferencedColumnError(
    ...<6 lines>...
    )
sqlalchemy.exc.NoReferencedColumnError: Could not initialize target column for ForeignKey 'genres.oid' on table 'track_genres': table 'genres' has no column named 'oid'

2025-05-19 09:40:25,816 - uvicorn.error - [ERROR] - Application startup failed. Exiting.
2025-05-19 09:40:44,578 - uvicorn.error - [INFO] - Started server process [14]
2025-05-19 09:40:44,579 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 09:40:44,579 - src.common.core.logging - [INFO] - start app
2025-05-19 09:40:44,621 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 09:40:44,621 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 09:40:44,622 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 09:40:44,622 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 09:40:44,623 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 09:40:44,623 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 09:40:44,624 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 09:40:44,627 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:40:44,628 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00028s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:40:44,631 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:40:44,631 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003669s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:40:44,632 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:40:44,632 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004419s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:40:44,632 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:40:44,632 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005084s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:40:44,633 - sqlalchemy.engine.Engine - [INFO] - 
CREATE TABLE genres (
	id SERIAL NOT NULL, 
	name VARCHAR NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (name)
)


2025-05-19 09:40:44,633 - sqlalchemy.engine.Engine - [INFO] - [no key 0.00009s] ()
2025-05-19 09:40:44,640 - sqlalchemy.engine.Engine - [INFO] - 
CREATE TABLE albums (
	oid SERIAL NOT NULL, 
	_title VARCHAR NOT NULL, 
	_owner_id INTEGER NOT NULL, 
	_release_date DATE NOT NULL, 
	PRIMARY KEY (oid)
)


2025-05-19 09:40:44,640 - sqlalchemy.engine.Engine - [INFO] - [no key 0.00014s] ()
2025-05-19 09:40:44,643 - sqlalchemy.engine.Engine - [INFO] - 
CREATE TABLE tracks (
	oid SERIAL NOT NULL, 
	_title VARCHAR NOT NULL, 
	_album_id INTEGER, 
	_explicit BOOLEAN, 
	PRIMARY KEY (oid), 
	FOREIGN KEY(_album_id) REFERENCES albums (oid)
)


2025-05-19 09:40:44,643 - sqlalchemy.engine.Engine - [INFO] - [no key 0.00011s] ()
2025-05-19 09:40:44,646 - sqlalchemy.engine.Engine - [INFO] - 
CREATE TABLE track_genres (
	track_id INTEGER, 
	genre_id INTEGER, 
	FOREIGN KEY(track_id) REFERENCES tracks (oid), 
	FOREIGN KEY(genre_id) REFERENCES genres (id)
)


2025-05-19 09:40:44,646 - sqlalchemy.engine.Engine - [INFO] - [no key 0.00013s] ()
2025-05-19 09:40:44,648 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 09:40:44,655 - src.common.core.logging - [INFO] - mapping done
2025-05-19 09:40:44,656 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 09:43:14,923 - uvicorn.error - [INFO] - Shutting down
2025-05-19 09:43:15,024 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 09:43:15,024 - src.common.core.logging - [INFO] - finish app
2025-05-19 09:43:15,024 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 09:43:15,024 - uvicorn.error - [INFO] - Finished server process [14]
2025-05-19 09:43:21,068 - uvicorn.error - [INFO] - Started server process [8]
2025-05-19 09:43:21,068 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 09:43:21,068 - src.common.core.logging - [INFO] - start app
2025-05-19 09:43:21,121 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 09:43:21,121 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 09:43:21,123 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 09:43:21,123 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 09:43:21,125 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 09:43:21,125 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 09:43:21,126 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 09:43:21,129 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:43:21,130 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00027s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:43:21,133 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:43:21,133 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003773s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:43:21,134 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:43:21,134 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004511s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:43:21,134 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 09:43:21,134 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005173s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 09:43:21,135 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 09:43:21,135 - src.common.core.logging - [INFO] - mapping done
2025-05-19 09:43:21,136 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 09:43:24,825 - uvicorn.access - [INFO] - 172.20.0.1:52178 - "GET /docs HTTP/1.1" 200
2025-05-19 09:43:25,223 - uvicorn.access - [INFO] - 172.20.0.1:52178 - "GET /openapi.json HTTP/1.1" 200
2025-05-19 09:51:00,774 - src.common.core.logging - [INFO] - Создание альбома Album Name.
2025-05-19 09:51:00,775 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 09:51:00,776 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO albums (_title, _owner_id, _release_date) VALUES ($1::VARCHAR, $2::INTEGER, $3::DATE) RETURNING albums.oid
2025-05-19 09:51:00,776 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00016s] ('Album Name', 0, datetime.date(2025, 5, 19))
2025-05-19 09:51:00,778 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 09:51:00,786 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 09:51:00,787 - sqlalchemy.engine.Engine - [INFO] - SELECT albums.oid, albums._title, albums._owner_id, albums._release_date 
FROM albums 
WHERE albums.oid = $1::INTEGER
2025-05-19 09:51:00,787 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00017s] (1,)
2025-05-19 09:51:00,788 - src.common.core.logging - [INFO] - Альбом Album Name успешно создан.
2025-05-19 09:51:00,789 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 09:51:00,789 - uvicorn.access - [INFO] - 172.20.0.1:54122 - "POST /api/v1/api/v1/create_album HTTP/1.1" 200
2025-05-19 10:32:19,697 - uvicorn.error - [INFO] - Shutting down
2025-05-19 10:32:19,798 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 10:32:19,798 - src.common.core.logging - [INFO] - finish app
2025-05-19 10:32:19,798 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 10:32:19,799 - uvicorn.error - [INFO] - Finished server process [8]
2025-05-19 12:06:53,604 - uvicorn.error - [INFO] - Started server process [8]
2025-05-19 12:06:53,604 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 12:06:53,604 - src.common.core.logging - [INFO] - start app
2025-05-19 12:06:53,658 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 12:06:53,658 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:06:53,660 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 12:06:53,660 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:06:53,661 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 12:06:53,661 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:06:53,662 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:06:53,665 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:06:53,665 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00021s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:06:53,670 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:06:53,670 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.00467s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:06:53,671 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:06:53,671 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005441s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:06:53,671 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:06:53,671 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.006167s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:06:53,672 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:06:53,673 - src.common.core.logging - [INFO] - mapping done
2025-05-19 12:06:53,673 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 12:08:58,402 - uvicorn.access - [INFO] - 172.20.0.1:48654 - "GET /docs HTTP/1.1" 200
2025-05-19 12:08:58,647 - uvicorn.access - [INFO] - 172.20.0.1:48654 - "GET /openapi.json HTTP/1.1" 200
2025-05-19 12:10:45,518 - uvicorn.access - [INFO] - 172.20.0.1:57062 - "POST /api/v1/api/v1/create_track HTTP/1.1" 200
2025-05-19 12:12:03,476 - src.common.core.logging - [INFO] - Создание альбома Cool Album.
2025-05-19 12:12:03,477 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:12:03,479 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO albums (_title, _owner_id, _release_date) VALUES ($1::VARCHAR, $2::INTEGER, $3::DATE) RETURNING albums.oid
2025-05-19 12:12:03,479 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00026s] ('Cool Album', 3, datetime.date(2025, 5, 19))
2025-05-19 12:12:03,482 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:12:03,490 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:12:03,491 - sqlalchemy.engine.Engine - [INFO] - SELECT albums.oid, albums._title, albums._owner_id, albums._release_date 
FROM albums 
WHERE albums.oid = $1::INTEGER
2025-05-19 12:12:03,491 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00016s] (2,)
2025-05-19 12:12:03,492 - src.common.core.logging - [INFO] - Альбом Cool Album успешно создан.
2025-05-19 12:12:03,493 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 12:12:03,493 - uvicorn.access - [INFO] - 172.20.0.1:57558 - "POST /api/v1/api/v1/create_album HTTP/1.1" 200
2025-05-19 12:36:55,869 - uvicorn.error - [INFO] - Shutting down
2025-05-19 12:36:55,970 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 12:36:55,970 - src.common.core.logging - [INFO] - finish app
2025-05-19 12:36:55,970 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 12:36:55,971 - uvicorn.error - [INFO] - Finished server process [8]
2025-05-19 12:36:56,642 - uvicorn.error - [INFO] - Started server process [11]
2025-05-19 12:36:56,643 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 12:36:56,643 - src.common.core.logging - [INFO] - start app
2025-05-19 12:36:56,692 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 12:36:56,692 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:36:56,693 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 12:36:56,693 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:36:56,694 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 12:36:56,694 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:36:56,695 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:36:56,698 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:36:56,699 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00027s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:36:56,701 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:36:56,701 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.002667s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:36:56,701 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:36:56,701 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003256s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:36:56,702 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:36:56,702 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004075s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:36:56,703 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:36:56,704 - src.common.core.logging - [INFO] - mapping done
2025-05-19 12:36:56,704 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 12:37:21,362 - uvicorn.error - [INFO] - Shutting down
2025-05-19 12:37:21,462 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 12:37:21,463 - src.common.core.logging - [INFO] - finish app
2025-05-19 12:37:21,463 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 12:37:21,463 - uvicorn.error - [INFO] - Finished server process [11]
2025-05-19 12:37:22,120 - uvicorn.error - [INFO] - Started server process [13]
2025-05-19 12:37:22,120 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 12:37:22,121 - src.common.core.logging - [INFO] - start app
2025-05-19 12:37:22,162 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 12:37:22,162 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:37:22,164 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 12:37:22,164 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:37:22,165 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 12:37:22,165 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:37:22,166 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:37:22,169 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:37:22,169 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00027s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:37:22,172 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:37:22,172 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003039s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:37:22,173 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:37:22,173 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003832s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:37:22,174 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:37:22,174 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.00448s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:37:22,174 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:37:22,175 - src.common.core.logging - [INFO] - mapping done
2025-05-19 12:37:22,175 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 12:37:32,828 - uvicorn.access - [INFO] - 172.20.0.1:38544 - "GET /docs HTTP/1.1" 200
2025-05-19 12:37:33,103 - uvicorn.access - [INFO] - 172.20.0.1:38544 - "GET /openapi.json HTTP/1.1" 200
2025-05-19 12:41:02,183 - src.common.core.logging - [INFO] - Создание трека Track Name.
2025-05-19 12:41:02,183 - uvicorn.access - [INFO] - 172.20.0.1:54180 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 12:41:02,184 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_album = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 22, in create_track
    genre = self.session.query(Genre).filter(Genre.name == name).first()
            ^^^^^^^^^^^^
AttributeError: 'TrackRepository' object has no attribute 'session'
2025-05-19 12:42:24,991 - uvicorn.error - [INFO] - Shutting down
2025-05-19 12:42:25,092 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 12:42:25,092 - src.common.core.logging - [INFO] - finish app
2025-05-19 12:42:25,093 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 12:42:25,093 - uvicorn.error - [INFO] - Finished server process [13]
2025-05-19 12:42:25,800 - uvicorn.error - [INFO] - Started server process [16]
2025-05-19 12:42:25,800 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 12:42:25,800 - src.common.core.logging - [INFO] - start app
2025-05-19 12:42:25,842 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 12:42:25,842 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:42:25,843 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 12:42:25,843 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:42:25,844 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 12:42:25,844 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:42:25,845 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:42:25,848 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:42:25,848 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00022s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:42:25,850 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:42:25,850 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.002578s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:42:25,851 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:42:25,851 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003137s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:42:25,851 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:42:25,851 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003683s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:42:25,852 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:42:25,852 - src.common.core.logging - [INFO] - mapping done
2025-05-19 12:42:25,852 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 12:42:43,891 - uvicorn.error - [INFO] - Shutting down
2025-05-19 12:42:43,991 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 12:42:43,992 - src.common.core.logging - [INFO] - finish app
2025-05-19 12:42:43,992 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 12:42:43,992 - uvicorn.error - [INFO] - Finished server process [16]
2025-05-19 12:42:44,644 - uvicorn.error - [INFO] - Started server process [18]
2025-05-19 12:42:44,644 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 12:42:44,644 - src.common.core.logging - [INFO] - start app
2025-05-19 12:42:44,690 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 12:42:44,690 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:42:44,692 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 12:42:44,692 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:42:44,693 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 12:42:44,693 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:42:44,694 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:42:44,698 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:42:44,698 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00028s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:42:44,702 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:42:44,702 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004861s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:42:44,704 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:42:44,704 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.006288s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:42:44,705 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:42:44,705 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.007254s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:42:44,706 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:42:44,706 - src.common.core.logging - [INFO] - mapping done
2025-05-19 12:42:44,706 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 12:42:57,999 - uvicorn.access - [INFO] - 172.20.0.1:43912 - "GET /docs HTTP/1.1" 200
2025-05-19 12:42:58,282 - uvicorn.access - [INFO] - 172.20.0.1:43912 - "GET /openapi.json HTTP/1.1" 200
2025-05-19 12:45:28,756 - uvicorn.access - [INFO] - 172.20.0.1:45698 - "GET /docs HTTP/1.1" 200
2025-05-19 12:45:29,027 - uvicorn.access - [INFO] - 172.20.0.1:45698 - "GET /openapi.json HTTP/1.1" 200
2025-05-19 12:45:51,745 - src.common.core.logging - [INFO] - Создание трека Track Name.
2025-05-19 12:45:51,746 - uvicorn.access - [INFO] - 172.20.0.1:50342 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 12:45:51,746 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_album = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 22, in create_track
    genre = self.db.execute(select(Genre).where(Genre.name == name)).scalars().first()
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'scalars'
2025-05-19 12:46:08,053 - uvicorn.error - [INFO] - Shutting down
2025-05-19 12:46:08,154 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 12:46:08,154 - src.common.core.logging - [INFO] - finish app
2025-05-19 12:46:08,154 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 12:46:08,154 - uvicorn.error - [INFO] - Finished server process [18]
2025-05-19 12:46:08,816 - uvicorn.error - [INFO] - Started server process [21]
2025-05-19 12:46:08,816 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 12:46:08,816 - src.common.core.logging - [INFO] - start app
2025-05-19 12:46:08,860 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 12:46:08,860 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:46:08,861 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 12:46:08,862 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:46:08,862 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 12:46:08,862 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:46:08,863 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:46:08,867 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:46:08,868 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00029s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:46:08,870 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:46:08,870 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.002597s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:46:08,870 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:46:08,870 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003214s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:46:08,871 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:46:08,871 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003794s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:46:08,872 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:46:08,873 - src.common.core.logging - [INFO] - mapping done
2025-05-19 12:46:08,873 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 12:46:17,605 - src.common.core.logging - [INFO] - Создание трека Track Name.
2025-05-19 12:46:17,606 - uvicorn.access - [INFO] - 172.20.0.1:37734 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 12:46:17,607 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_album = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 22, in create_track
    genre = await self.db.execute(select(Genre).where(Genre.name == name)).scalars().first()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'coroutine' object has no attribute 'scalars'
2025-05-19 12:46:58,792 - uvicorn.error - [INFO] - Shutting down
2025-05-19 12:46:58,893 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 12:46:58,893 - src.common.core.logging - [INFO] - finish app
2025-05-19 12:46:58,893 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 12:46:58,893 - uvicorn.error - [INFO] - Finished server process [21]
2025-05-19 12:46:59,605 - uvicorn.error - [INFO] - Started server process [24]
2025-05-19 12:46:59,605 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 12:46:59,605 - src.common.core.logging - [INFO] - start app
2025-05-19 12:46:59,653 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 12:46:59,653 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:46:59,654 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 12:46:59,654 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:46:59,655 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 12:46:59,655 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:46:59,656 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:46:59,661 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:46:59,661 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00029s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:46:59,663 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:46:59,663 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.002959s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:46:59,664 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:46:59,665 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004224s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:46:59,665 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:46:59,666 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005135s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:46:59,666 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:46:59,667 - src.common.core.logging - [INFO] - mapping done
2025-05-19 12:46:59,667 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 12:47:00,626 - src.common.core.logging - [INFO] - Создание трека Track Name.
2025-05-19 12:47:00,628 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:47:00,645 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres.name 
FROM genres 
WHERE genres.name = $1::VARCHAR
2025-05-19 12:47:00,645 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00058s] ('Pop',)
2025-05-19 12:47:00,649 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 12:47:00,650 - uvicorn.access - [INFO] - 172.20.0.1:39608 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 12:47:00,651 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_album = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 29, in create_track
    t.genres = genres
    ^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 537, in __set__
    self.impl.set(
    ~~~~~~~~~~~~~^
        instance_state(instance), instance_dict(instance), value, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1985, in set
    collections.bulk_replace(
    ~~~~~~~~~~~~~~~~~~~~~~~~^
        new_values, old_collection, new_collection, initiator=evt
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/collections.py", line 811, in bulk_replace
    appender(member, _sa_initiator=initiator)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/collections.py", line 1138, in append
    item = __set(self, item, _sa_initiator, NO_KEY)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/collections.py", line 1103, in __set
    item = executor.fire_append_event(item, _sa_initiator, key=key)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/collections.py", line 695, in fire_append_event
    return self.attr.fire_append_event(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.owner_state, self.owner_state.dict, item, initiator, key
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1752, in fire_append_event
    value = fn(state, value, initiator or self._append_token, key=key)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 2199, in emit_backref_from_collection_append_event
    child_state, child_dict = instance_state(child), instance_dict(child)
                              ~~~~~~~~~~~~~~^^^^^^^
AttributeError: 'ChunkedIteratorResult' object has no attribute '_sa_instance_state'
2025-05-19 12:47:23,124 - uvicorn.error - [INFO] - Shutting down
2025-05-19 12:47:23,224 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 12:47:23,225 - src.common.core.logging - [INFO] - finish app
2025-05-19 12:47:23,225 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 12:47:23,225 - uvicorn.error - [INFO] - Finished server process [24]
2025-05-19 12:47:23,913 - uvicorn.error - [INFO] - Started server process [27]
2025-05-19 12:47:23,914 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 12:47:23,914 - src.common.core.logging - [INFO] - start app
2025-05-19 12:47:23,955 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 12:47:23,955 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:47:23,957 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 12:47:23,957 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:47:23,958 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 12:47:23,958 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:47:23,959 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:47:23,963 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:47:23,963 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00029s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:47:23,966 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:47:23,966 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003163s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:47:23,967 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:47:23,967 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003936s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:47:23,968 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:47:23,968 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004531s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:47:23,968 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:47:23,969 - src.common.core.logging - [INFO] - mapping done
2025-05-19 12:47:23,969 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 12:47:25,735 - src.common.core.logging - [INFO] - Создание трека Track Name.
2025-05-19 12:47:25,736 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:47:25,744 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres.name 
FROM genres 
WHERE genres.name = $1::VARCHAR
2025-05-19 12:47:25,745 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00025s] ('Pop',)
2025-05-19 12:47:25,748 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 12:47:25,749 - uvicorn.access - [INFO] - 172.20.0.1:48670 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 12:47:25,750 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_album = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 26, in create_track
    await genres.append(genre)
TypeError: object NoneType can't be used in 'await' expression
2025-05-19 12:48:04,867 - uvicorn.error - [INFO] - Shutting down
2025-05-19 12:48:04,967 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 12:48:04,967 - src.common.core.logging - [INFO] - finish app
2025-05-19 12:48:04,968 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 12:48:04,968 - uvicorn.error - [INFO] - Finished server process [27]
2025-05-19 12:48:05,694 - uvicorn.error - [INFO] - Started server process [30]
2025-05-19 12:48:05,694 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 12:48:05,695 - src.common.core.logging - [INFO] - start app
2025-05-19 12:48:05,736 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 12:48:05,736 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:48:05,737 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 12:48:05,738 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:48:05,738 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 12:48:05,738 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:48:05,739 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:48:05,743 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:48:05,743 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00023s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:48:05,745 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:48:05,746 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.002994s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:48:05,746 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:48:05,746 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003961s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:48:05,747 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:48:05,747 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004772s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:48:05,748 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:48:05,749 - src.common.core.logging - [INFO] - mapping done
2025-05-19 12:48:05,749 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 12:48:06,015 - src.common.core.logging - [INFO] - Создание трека Track Name.
2025-05-19 12:48:06,016 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:48:06,023 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres.name 
FROM genres 
WHERE genres.name = $1::VARCHAR
2025-05-19 12:48:06,023 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00025s] ('Pop',)
2025-05-19 12:48:06,026 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 12:48:06,027 - uvicorn.access - [INFO] - 172.20.0.1:55318 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 12:48:06,027 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_album = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 29, in create_track
    t.genres = genres
    ^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 537, in __set__
    self.impl.set(
    ~~~~~~~~~~~~~^
        instance_state(instance), instance_dict(instance), value, None
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1985, in set
    collections.bulk_replace(
    ~~~~~~~~~~~~~~~~~~~~~~~~^
        new_values, old_collection, new_collection, initiator=evt
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/collections.py", line 811, in bulk_replace
    appender(member, _sa_initiator=initiator)
    ~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/collections.py", line 1138, in append
    item = __set(self, item, _sa_initiator, NO_KEY)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/collections.py", line 1103, in __set
    item = executor.fire_append_event(item, _sa_initiator, key=key)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/collections.py", line 695, in fire_append_event
    return self.attr.fire_append_event(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.owner_state, self.owner_state.dict, item, initiator, key
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 1752, in fire_append_event
    value = fn(state, value, initiator or self._append_token, key=key)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/attributes.py", line 2199, in emit_backref_from_collection_append_event
    child_state, child_dict = instance_state(child), instance_dict(child)
                              ~~~~~~~~~~~~~~^^^^^^^
AttributeError: 'ChunkedIteratorResult' object has no attribute '_sa_instance_state'
2025-05-19 12:49:24,159 - uvicorn.error - [INFO] - Shutting down
2025-05-19 12:49:24,260 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 12:49:24,260 - src.common.core.logging - [INFO] - finish app
2025-05-19 12:49:24,261 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 12:49:24,261 - uvicorn.error - [INFO] - Finished server process [30]
2025-05-19 12:49:24,930 - uvicorn.error - [INFO] - Started server process [33]
2025-05-19 12:49:24,930 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 12:49:24,930 - src.common.core.logging - [INFO] - start app
2025-05-19 12:49:24,973 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 12:49:24,974 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:49:24,976 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 12:49:24,976 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:49:24,977 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 12:49:24,977 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:49:24,978 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:49:24,982 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:49:24,982 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00027s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:49:24,986 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:49:24,986 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.0042s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:49:24,987 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:49:24,987 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004962s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:49:24,987 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:49:24,987 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005661s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:49:24,988 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:49:24,988 - src.common.core.logging - [INFO] - mapping done
2025-05-19 12:49:24,988 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 12:51:57,259 - src.common.core.logging - [INFO] - Создание трека Track Name.
2025-05-19 12:51:57,274 - uvicorn.access - [INFO] - 172.20.0.1:34764 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 12:51:57,275 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_track = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 31, in create_track
    await self.db.add(t)
TypeError: object NoneType can't be used in 'await' expression
2025-05-19 12:52:28,208 - uvicorn.error - [INFO] - Shutting down
2025-05-19 12:52:28,309 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 12:52:28,309 - src.common.core.logging - [INFO] - finish app
2025-05-19 12:52:28,309 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 12:52:28,309 - uvicorn.error - [INFO] - Finished server process [33]
2025-05-19 12:52:29,027 - uvicorn.error - [INFO] - Started server process [36]
2025-05-19 12:52:29,027 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 12:52:29,027 - src.common.core.logging - [INFO] - start app
2025-05-19 12:52:29,075 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 12:52:29,075 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:52:29,076 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 12:52:29,077 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:52:29,078 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 12:52:29,078 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:52:29,079 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:52:29,082 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:52:29,083 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00027s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:52:29,087 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:52:29,087 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005124s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:52:29,088 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:52:29,088 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.00602s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:52:29,089 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:52:29,089 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.006959s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:52:29,090 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:52:29,091 - src.common.core.logging - [INFO] - mapping done
2025-05-19 12:52:29,091 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 12:52:31,171 - src.common.core.logging - [INFO] - Создание трека Track Name.
2025-05-19 12:52:31,181 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:52:31,184 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO tracks (_title, _album_id, _explicit) VALUES ($1::VARCHAR, $2::INTEGER, $3::BOOLEAN) RETURNING tracks.oid
2025-05-19 12:52:31,184 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00030s] ('Track Name', 1, True)
2025-05-19 12:52:31,187 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:52:31,196 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:52:31,198 - sqlalchemy.engine.Engine - [INFO] - SELECT tracks.oid, tracks._title, tracks._album_id, tracks._explicit 
FROM tracks 
WHERE tracks.oid = $1::INTEGER
2025-05-19 12:52:31,198 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00027s] (1,)
2025-05-19 12:52:31,199 - src.common.core.logging - [INFO] - Трек Track Name успешно создан.
2025-05-19 12:52:31,200 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 12:52:31,200 - uvicorn.access - [INFO] - 172.20.0.1:51676 - "POST /api/v1/api/v1/create_track HTTP/1.1" 200
2025-05-19 12:56:35,581 - uvicorn.error - [INFO] - Shutting down
2025-05-19 12:56:35,681 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 12:56:35,681 - src.common.core.logging - [INFO] - finish app
2025-05-19 12:56:35,682 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 12:56:35,682 - uvicorn.error - [INFO] - Finished server process [36]
2025-05-19 12:56:36,371 - uvicorn.error - [INFO] - Started server process [39]
2025-05-19 12:56:36,371 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 12:56:36,371 - src.common.core.logging - [INFO] - start app
2025-05-19 12:56:36,431 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 12:56:36,431 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:56:36,433 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 12:56:36,433 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:56:36,434 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 12:56:36,434 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 12:56:36,435 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:56:36,439 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:56:36,439 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00027s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:56:36,442 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:56:36,442 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003152s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:56:36,443 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:56:36,443 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.00397s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:56:36,444 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 12:56:36,444 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004593s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 12:56:36,444 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 12:56:36,445 - src.common.core.logging - [INFO] - mapping done
2025-05-19 12:56:36,445 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 12:56:51,660 - src.common.core.logging - [INFO] - Создание трека Cool Track.
2025-05-19 12:56:51,662 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 12:56:51,679 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres.name 
FROM genres 
WHERE genres.name = $1::VARCHAR
2025-05-19 12:56:51,680 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00050s] ('Pop',)
2025-05-19 12:56:51,684 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 12:56:51,685 - uvicorn.access - [INFO] - 172.20.0.1:37756 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 12:56:51,686 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_track = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 26, in create_track
    await self.db.add(genre)
TypeError: object NoneType can't be used in 'await' expression
2025-05-19 13:05:10,826 - uvicorn.error - [INFO] - Shutting down
2025-05-19 13:05:10,926 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 13:05:10,927 - src.common.core.logging - [INFO] - finish app
2025-05-19 13:05:10,927 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 13:05:10,927 - uvicorn.error - [INFO] - Finished server process [39]
2025-05-19 13:05:11,567 - uvicorn.error - [INFO] - Started server process [42]
2025-05-19 13:05:11,567 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 13:05:11,567 - src.common.core.logging - [INFO] - start app
2025-05-19 13:05:11,608 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 13:05:11,608 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:05:11,610 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 13:05:11,610 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:05:11,610 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 13:05:11,611 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:05:11,611 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:05:11,615 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:05:11,615 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00029s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:05:11,619 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:05:11,619 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004538s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:05:11,620 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:05:11,620 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005449s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:05:11,621 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:05:11,621 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.006436s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:05:11,622 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 13:05:11,623 - src.common.core.logging - [INFO] - mapping done
2025-05-19 13:05:11,623 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 13:25:44,631 - src.common.core.logging - [INFO] - Создание трека Cool Track.
2025-05-19 13:25:44,632 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:25:44,648 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres.name 
FROM genres 
WHERE genres.name = $1::VARCHAR
2025-05-19 13:25:44,648 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00045s] ('Pop',)
2025-05-19 13:25:44,656 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 13:25:44,657 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00043s] (None,)
2025-05-19 13:25:44,659 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 13:25:44,661 - uvicorn.access - [INFO] - 172.20.0.1:47058 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 13:31:02,088 - src.common.core.logging - [INFO] - Создание трека Cool Track.
2025-05-19 13:31:02,089 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:31:02,089 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres.name 
FROM genres 
WHERE genres.name = $1::VARCHAR
2025-05-19 13:31:02,089 - sqlalchemy.engine.Engine - [INFO] - [cached since 317.4s ago] ('Pop',)
2025-05-19 13:31:02,091 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 13:31:02,091 - sqlalchemy.engine.Engine - [INFO] - [cached since 317.4s ago] (None,)
2025-05-19 13:31:02,092 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 13:31:02,093 - uvicorn.access - [INFO] - 172.20.0.1:53328 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 13:31:47,043 - src.common.core.logging - [INFO] - Создание трека Cool Track.
2025-05-19 13:31:47,044 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:31:47,044 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres.name 
FROM genres 
WHERE genres.name = $1::VARCHAR
2025-05-19 13:31:47,045 - sqlalchemy.engine.Engine - [INFO] - [cached since 362.4s ago] ('Pop',)
2025-05-19 13:31:47,047 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 13:31:47,047 - sqlalchemy.engine.Engine - [INFO] - [cached since 362.4s ago] (None,)
2025-05-19 13:31:47,049 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 13:31:47,050 - uvicorn.access - [INFO] - 172.20.0.1:44254 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 13:32:45,737 - uvicorn.error - [INFO] - Shutting down
2025-05-19 13:32:45,838 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 13:32:45,838 - src.common.core.logging - [INFO] - finish app
2025-05-19 13:32:45,839 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 13:32:45,839 - uvicorn.error - [INFO] - Finished server process [42]
2025-05-19 13:32:46,526 - uvicorn.error - [INFO] - Started server process [45]
2025-05-19 13:32:46,527 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 13:32:46,527 - src.common.core.logging - [INFO] - start app
2025-05-19 13:32:46,571 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 13:32:46,571 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:32:46,572 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 13:32:46,573 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:32:46,573 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 13:32:46,574 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:32:46,574 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:32:46,578 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:32:46,578 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00021s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:32:46,580 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:32:46,581 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.00312s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:32:46,581 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:32:46,581 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003855s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:32:46,582 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:32:46,582 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004483s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:32:46,583 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 13:32:46,583 - src.common.core.logging - [INFO] - mapping done
2025-05-19 13:32:46,583 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 13:32:53,722 - src.common.core.logging - [INFO] - Создание трека Cool Track.
2025-05-19 13:32:53,723 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:32:53,738 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id 
FROM genres 
WHERE false
2025-05-19 13:32:53,738 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00049s] ()
2025-05-19 13:32:53,745 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres DEFAULT VALUES RETURNING genres.id
2025-05-19 13:32:53,746 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00046s] ()
2025-05-19 13:32:53,748 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 13:32:53,749 - uvicorn.access - [INFO] - 172.20.0.1:33128 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 13:32:58,894 - src.common.core.logging - [INFO] - Создание трека Cool Track.
2025-05-19 13:32:58,895 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:32:58,896 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id 
FROM genres 
WHERE false
2025-05-19 13:32:58,896 - sqlalchemy.engine.Engine - [INFO] - [cached since 5.158s ago] ()
2025-05-19 13:32:58,898 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres DEFAULT VALUES RETURNING genres.id
2025-05-19 13:32:58,899 - sqlalchemy.engine.Engine - [INFO] - [cached since 5.153s ago] ()
2025-05-19 13:32:58,900 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 13:32:58,902 - uvicorn.access - [INFO] - 172.20.0.1:33130 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 13:35:15,398 - uvicorn.error - [INFO] - Shutting down
2025-05-19 13:35:15,498 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 13:35:15,498 - src.common.core.logging - [INFO] - finish app
2025-05-19 13:35:15,498 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 13:35:15,498 - uvicorn.error - [INFO] - Finished server process [45]
2025-05-19 13:35:16,149 - uvicorn.error - [INFO] - Started server process [48]
2025-05-19 13:35:16,150 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 13:35:16,150 - src.common.core.logging - [INFO] - start app
2025-05-19 13:35:16,197 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 13:35:16,197 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:35:16,198 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 13:35:16,198 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:35:16,199 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 13:35:16,199 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:35:16,200 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:35:16,204 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:35:16,205 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00031s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:35:16,207 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:35:16,207 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.002729s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:35:16,208 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:35:16,208 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003439s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:35:16,208 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:35:16,209 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004269s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:35:16,209 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 13:35:16,210 - src.common.core.logging - [INFO] - mapping done
2025-05-19 13:35:16,210 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 13:35:17,467 - src.common.core.logging - [INFO] - Создание трека Cool Track, ['Pop', 'Indie'].
2025-05-19 13:35:17,469 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:35:17,485 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id 
FROM genres 
WHERE false
2025-05-19 13:35:17,485 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00050s] ()
2025-05-19 13:35:17,491 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres DEFAULT VALUES RETURNING genres.id
2025-05-19 13:35:17,492 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00055s] ()
2025-05-19 13:35:17,494 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 13:35:17,496 - uvicorn.access - [INFO] - 172.20.0.1:38162 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 13:35:46,190 - uvicorn.error - [INFO] - Shutting down
2025-05-19 13:35:46,291 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 13:35:46,291 - src.common.core.logging - [INFO] - finish app
2025-05-19 13:35:46,291 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 13:35:46,291 - uvicorn.error - [INFO] - Finished server process [48]
2025-05-19 13:35:46,985 - uvicorn.error - [INFO] - Started server process [51]
2025-05-19 13:35:46,986 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 13:35:46,986 - src.common.core.logging - [INFO] - start app
2025-05-19 13:35:47,026 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 13:35:47,026 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:35:47,029 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 13:35:47,029 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:35:47,030 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 13:35:47,030 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:35:47,031 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:35:47,034 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:35:47,034 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00023s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:35:47,037 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:35:47,037 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003032s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:35:47,038 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:35:47,038 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003941s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:35:47,039 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:35:47,039 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004614s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:35:47,039 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 13:35:47,040 - src.common.core.logging - [INFO] - mapping done
2025-05-19 13:35:47,040 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 13:35:52,455 - uvicorn.error - [INFO] - Shutting down
2025-05-19 13:35:52,555 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 13:35:52,555 - src.common.core.logging - [INFO] - finish app
2025-05-19 13:35:52,556 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 13:35:52,556 - uvicorn.error - [INFO] - Finished server process [51]
2025-05-19 13:35:53,242 - uvicorn.error - [INFO] - Started server process [53]
2025-05-19 13:35:53,242 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 13:35:53,242 - src.common.core.logging - [INFO] - start app
2025-05-19 13:35:53,289 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 13:35:53,289 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:35:53,290 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 13:35:53,290 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:35:53,291 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 13:35:53,291 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:35:53,292 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:35:53,296 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:35:53,296 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00023s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:35:53,300 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:35:53,300 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004102s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:35:53,301 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:35:53,302 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005801s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:35:53,303 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:35:53,303 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.007244s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:35:53,304 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 13:35:53,304 - src.common.core.logging - [INFO] - mapping done
2025-05-19 13:35:53,304 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 13:35:53,870 - src.common.core.logging - [INFO] - Создание трека Cool Track.
2025-05-19 13:35:53,870 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:35:53,876 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE false
2025-05-19 13:35:53,877 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00025s] ()
2025-05-19 13:35:53,885 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 13:35:53,885 - uvicorn.access - [INFO] - 172.20.0.1:50614 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 13:35:53,886 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, self._invalidate_schema_cache_asof
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        operation, name=self._prepared_statement_name_func()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/connection.py", line 635, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/connection.py", line 653, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
asyncpg.exceptions.UndefinedColumnError: column genres._name does not exist
HINT:  Perhaps you meant to reference the column "genres.name".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column genres._name does not exist
HINT:  Perhaps you meant to reference the column "genres.name".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_track = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 22, in create_track
    result = await self.db.execute(select(Genre).where(Genre.name == name))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 945, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self._prepare_and_execute(operation, parameters)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column genres._name does not exist
HINT:  Perhaps you meant to reference the column "genres.name".
[SQL: SELECT genres.id, genres._name 
FROM genres 
WHERE false]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-05-19 13:36:25,486 - uvicorn.error - [INFO] - Shutting down
2025-05-19 13:36:25,587 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 13:36:25,587 - src.common.core.logging - [INFO] - finish app
2025-05-19 13:36:25,587 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 13:36:25,587 - uvicorn.error - [INFO] - Finished server process [53]
2025-05-19 13:37:44,232 - uvicorn.error - [INFO] - Started server process [8]
2025-05-19 13:37:44,232 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 13:37:44,233 - src.common.core.logging - [INFO] - start app
2025-05-19 13:37:44,288 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 13:37:44,288 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:37:44,290 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 13:37:44,290 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:37:44,291 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 13:37:44,291 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:37:44,292 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:37:44,296 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:37:44,296 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00023s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:37:44,299 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:37:44,300 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004012s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:37:44,300 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:37:44,300 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004908s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:37:44,301 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:37:44,301 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.00571s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:37:44,302 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 13:37:44,302 - src.common.core.logging - [INFO] - mapping done
2025-05-19 13:37:44,303 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 13:37:46,491 - uvicorn.access - [INFO] - 172.20.0.1:59024 - "GET /docs HTTP/1.1" 200
2025-05-19 13:37:46,764 - uvicorn.access - [INFO] - 172.20.0.1:59024 - "GET /openapi.json HTTP/1.1" 200
2025-05-19 13:38:12,163 - uvicorn.error - [INFO] - Shutting down
2025-05-19 13:38:12,263 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 13:38:12,263 - src.common.core.logging - [INFO] - finish app
2025-05-19 13:38:12,263 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 13:38:12,263 - uvicorn.error - [INFO] - Finished server process [8]
2025-05-19 13:38:12,928 - uvicorn.error - [INFO] - Started server process [10]
2025-05-19 13:38:12,928 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 13:38:12,928 - src.common.core.logging - [INFO] - start app
2025-05-19 13:38:12,976 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 13:38:12,976 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:38:12,977 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 13:38:12,977 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:38:12,978 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 13:38:12,978 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:38:12,979 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:38:12,983 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:38:12,983 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00026s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:38:12,985 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:38:12,985 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.002713s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:38:12,986 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:38:12,986 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.00364s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:38:12,987 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:38:12,987 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.00457s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:38:12,988 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 13:38:12,988 - src.common.core.logging - [INFO] - mapping done
2025-05-19 13:38:12,988 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 13:38:34,926 - src.common.core.logging - [INFO] - Создание трека Cool Track.
2025-05-19 13:38:34,928 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:38:34,936 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id 
FROM genres 
WHERE false
2025-05-19 13:38:34,936 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00024s] ()
2025-05-19 13:38:34,939 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 13:38:34,941 - uvicorn.access - [INFO] - 172.20.0.1:54224 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 13:38:34,942 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_track = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 25, in create_track
    genre = Genre(name=name)
  File "<string>", line 4, in __init__
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/state.py", line 571, in _initialize_instance
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/usr/local/lib/python3.13/site-packages/sqlalchemy/orm/state.py", line 569, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/database/models.py", line 25, in __init__
    self.name = name
    ^^^^^^^^^
AttributeError: property 'name' of 'Genre' object has no setter
2025-05-19 13:39:07,421 - uvicorn.error - [INFO] - Shutting down
2025-05-19 13:39:07,521 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 13:39:07,521 - src.common.core.logging - [INFO] - finish app
2025-05-19 13:39:07,522 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 13:39:07,522 - uvicorn.error - [INFO] - Finished server process [10]
2025-05-19 13:39:34,215 - uvicorn.error - [INFO] - Started server process [8]
2025-05-19 13:39:34,215 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 13:39:34,215 - src.common.core.logging - [INFO] - start app
2025-05-19 13:39:34,266 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 13:39:34,266 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:39:34,267 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 13:39:34,268 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:39:34,269 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 13:39:34,269 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:39:34,270 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:39:34,274 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:39:34,274 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00032s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:39:34,279 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:39:34,279 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005983s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:39:34,280 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:39:34,280 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.007065s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:39:34,281 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:39:34,281 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.007777s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:39:34,282 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 13:39:34,282 - src.common.core.logging - [INFO] - mapping done
2025-05-19 13:39:34,282 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 13:39:59,638 - uvicorn.error - [INFO] - Shutting down
2025-05-19 13:39:59,738 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 13:39:59,739 - src.common.core.logging - [INFO] - finish app
2025-05-19 13:39:59,739 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 13:39:59,739 - uvicorn.error - [INFO] - Finished server process [8]
2025-05-19 13:44:00,937 - uvicorn.error - [INFO] - Started server process [8]
2025-05-19 13:44:00,937 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 13:44:00,937 - src.common.core.logging - [INFO] - start app
2025-05-19 13:44:00,983 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 13:44:00,983 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:44:00,984 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 13:44:00,985 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:44:00,985 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 13:44:00,985 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 13:44:00,986 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:44:00,990 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:44:00,990 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00026s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:44:00,995 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:44:00,995 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.0051s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:44:00,996 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:44:00,996 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.006057s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:44:00,997 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 13:44:00,997 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.006897s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 13:44:00,998 - sqlalchemy.engine.Engine - [INFO] - 
CREATE TABLE genres (
	id SERIAL NOT NULL, 
	_name VARCHAR NOT NULL, 
	PRIMARY KEY (id), 
	UNIQUE (_name)
)


2025-05-19 13:44:00,998 - sqlalchemy.engine.Engine - [INFO] - [no key 0.00011s] ()
2025-05-19 13:44:01,002 - sqlalchemy.engine.Engine - [INFO] - 
CREATE TABLE albums (
	oid SERIAL NOT NULL, 
	_title VARCHAR NOT NULL, 
	_owner_id INTEGER NOT NULL, 
	_release_date DATE NOT NULL, 
	PRIMARY KEY (oid)
)


2025-05-19 13:44:01,003 - sqlalchemy.engine.Engine - [INFO] - [no key 0.00016s] ()
2025-05-19 13:44:01,008 - sqlalchemy.engine.Engine - [INFO] - 
CREATE TABLE tracks (
	oid SERIAL NOT NULL, 
	_title VARCHAR NOT NULL, 
	_album_id INTEGER, 
	_explicit BOOLEAN, 
	PRIMARY KEY (oid), 
	FOREIGN KEY(_album_id) REFERENCES albums (oid)
)


2025-05-19 13:44:01,008 - sqlalchemy.engine.Engine - [INFO] - [no key 0.00016s] ()
2025-05-19 13:44:01,012 - sqlalchemy.engine.Engine - [INFO] - 
CREATE TABLE track_genres (
	track_id INTEGER, 
	genre_id INTEGER, 
	FOREIGN KEY(track_id) REFERENCES tracks (oid), 
	FOREIGN KEY(genre_id) REFERENCES genres (id)
)


2025-05-19 13:44:01,012 - sqlalchemy.engine.Engine - [INFO] - [no key 0.00012s] ()
2025-05-19 13:44:01,014 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 13:44:01,022 - src.common.core.logging - [INFO] - mapping done
2025-05-19 13:44:01,022 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 13:44:25,869 - src.common.core.logging - [INFO] - Создание альбома Album Name .
2025-05-19 13:44:25,870 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:44:25,873 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO albums (_title, _owner_id, _release_date) VALUES ($1::VARCHAR, $2::INTEGER, $3::DATE) RETURNING albums.oid
2025-05-19 13:44:25,873 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00040s] ('Album Name ', 1, datetime.date(2025, 5, 19))
2025-05-19 13:44:25,876 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 13:44:25,885 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:44:25,887 - sqlalchemy.engine.Engine - [INFO] - SELECT albums.oid, albums._title, albums._owner_id, albums._release_date 
FROM albums 
WHERE albums.oid = $1::INTEGER
2025-05-19 13:44:25,887 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00017s] (1,)
2025-05-19 13:44:25,888 - src.common.core.logging - [INFO] - Альбом Album Name  успешно создан.
2025-05-19 13:44:25,889 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 13:44:25,889 - uvicorn.access - [INFO] - 172.20.0.1:51056 - "POST /api/v1/api/v1/create_album HTTP/1.1" 200
2025-05-19 13:44:41,861 - src.common.core.logging - [INFO] - Создание альбома Very Cool Album.
2025-05-19 13:44:41,862 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:44:41,862 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO albums (_title, _owner_id, _release_date) VALUES ($1::VARCHAR, $2::INTEGER, $3::DATE) RETURNING albums.oid
2025-05-19 13:44:41,862 - sqlalchemy.engine.Engine - [INFO] - [cached since 15.99s ago] ('Very Cool Album', 3, datetime.date(2025, 5, 19))
2025-05-19 13:44:41,864 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 13:44:41,873 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:44:41,874 - sqlalchemy.engine.Engine - [INFO] - SELECT albums.oid, albums._title, albums._owner_id, albums._release_date 
FROM albums 
WHERE albums.oid = $1::INTEGER
2025-05-19 13:44:41,874 - sqlalchemy.engine.Engine - [INFO] - [cached since 15.99s ago] (2,)
2025-05-19 13:44:41,876 - src.common.core.logging - [INFO] - Альбом Very Cool Album успешно создан.
2025-05-19 13:44:41,877 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 13:44:41,878 - uvicorn.access - [INFO] - 172.20.0.1:46588 - "POST /api/v1/api/v1/create_album HTTP/1.1" 200
2025-05-19 13:52:44,003 - src.common.core.logging - [INFO] - Создание трека Cool Track.
2025-05-19 13:52:44,003 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:52:44,005 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE false
2025-05-19 13:52:44,005 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00044s] ()
2025-05-19 13:52:44,010 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (_name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 13:52:44,010 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00049s] ('Pop',)
2025-05-19 13:52:44,012 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE false
2025-05-19 13:52:44,013 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.007732s ago] ()
2025-05-19 13:52:44,016 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (_name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 13:52:44,016 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.006771s ago] ('Indie',)
2025-05-19 13:52:44,019 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO tracks (_title, _album_id, _explicit) VALUES ($1::VARCHAR, $2::INTEGER, $3::BOOLEAN) RETURNING tracks.oid
2025-05-19 13:52:44,020 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00056s] ('Cool Track', 2, True)
2025-05-19 13:52:44,022 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO track_genres (track_id, genre_id) VALUES ($1::INTEGER, $2::INTEGER)
2025-05-19 13:52:44,023 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00038s] [(1, 1), (1, 2)]
2025-05-19 13:52:44,024 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 13:52:44,026 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 13:52:44,026 - sqlalchemy.engine.Engine - [INFO] - SELECT tracks.oid, tracks._title, tracks._album_id, tracks._explicit 
FROM tracks 
WHERE tracks.oid = $1::INTEGER
2025-05-19 13:52:44,027 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00015s] (1,)
2025-05-19 13:52:44,028 - src.common.core.logging - [INFO] - Трек Cool Track успешно создан.
2025-05-19 13:52:44,028 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 13:52:44,028 - uvicorn.access - [INFO] - 172.20.0.1:57866 - "POST /api/v1/api/v1/create_track HTTP/1.1" 200
2025-05-19 14:13:57,901 - src.common.core.logging - [INFO] - Создание трека Popsa.
2025-05-19 14:13:57,902 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:13:57,902 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE false
2025-05-19 14:13:57,903 - sqlalchemy.engine.Engine - [INFO] - [cached since 1274s ago] ()
2025-05-19 14:13:57,905 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (_name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 14:13:57,905 - sqlalchemy.engine.Engine - [INFO] - [cached since 1274s ago] ('Pop',)
2025-05-19 14:13:57,906 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 14:13:57,907 - uvicorn.access - [INFO] - 172.20.0.1:44478 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 14:14:58,935 - uvicorn.error - [INFO] - Shutting down
2025-05-19 14:14:59,035 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 14:14:59,035 - src.common.core.logging - [INFO] - finish app
2025-05-19 14:14:59,036 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 14:14:59,036 - uvicorn.error - [INFO] - Finished server process [8]
2025-05-19 14:14:59,697 - uvicorn.error - [INFO] - Started server process [11]
2025-05-19 14:14:59,697 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 14:14:59,697 - src.common.core.logging - [INFO] - start app
2025-05-19 14:14:59,750 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 14:14:59,751 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:14:59,754 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 14:14:59,754 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:14:59,756 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 14:14:59,756 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:14:59,757 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:14:59,763 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:14:59,763 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00029s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:14:59,766 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:14:59,767 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003708s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:14:59,767 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:14:59,767 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004511s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:14:59,768 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:14:59,768 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005144s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:14:59,769 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 14:14:59,769 - src.common.core.logging - [INFO] - mapping done
2025-05-19 14:14:59,769 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 14:16:25,647 - src.common.core.logging - [INFO] - Создание трека Popsa.
2025-05-19 14:16:25,648 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:16:25,656 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE false
2025-05-19 14:16:25,656 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00019s] ()
2025-05-19 14:16:25,663 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (_name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 14:16:25,664 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00043s] ('Pop',)
2025-05-19 14:16:25,665 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 14:16:25,667 - uvicorn.access - [INFO] - 172.20.0.1:33300 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 14:21:12,936 - uvicorn.error - [INFO] - Shutting down
2025-05-19 14:21:13,037 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 14:21:13,037 - src.common.core.logging - [INFO] - finish app
2025-05-19 14:21:13,037 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 14:21:13,038 - uvicorn.error - [INFO] - Finished server process [11]
2025-05-19 14:21:13,701 - uvicorn.error - [INFO] - Started server process [14]
2025-05-19 14:21:13,701 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 14:21:13,702 - src.common.core.logging - [INFO] - start app
2025-05-19 14:21:13,745 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 14:21:13,745 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:21:13,746 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 14:21:13,746 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:21:13,747 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 14:21:13,748 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:21:13,749 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:21:13,752 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:21:13,752 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00028s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:21:13,756 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:21:13,756 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003689s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:21:13,757 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:21:13,757 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004629s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:21:13,758 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:21:13,758 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005442s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:21:13,758 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 14:21:13,759 - src.common.core.logging - [INFO] - mapping done
2025-05-19 14:21:13,759 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 14:21:19,881 - src.common.core.logging - [INFO] - Создание трека Popsa.
2025-05-19 14:21:19,882 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:21:19,892 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE false
2025-05-19 14:21:19,892 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00032s] ()
2025-05-19 14:21:19,898 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (_name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 14:21:19,898 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00028s] ('Pop',)
2025-05-19 14:21:19,899 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 14:21:19,900 - uvicorn.access - [INFO] - 172.20.0.1:37110 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 14:22:36,251 - uvicorn.error - [INFO] - Shutting down
2025-05-19 14:22:36,352 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 14:22:36,352 - src.common.core.logging - [INFO] - finish app
2025-05-19 14:22:36,352 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 14:22:36,352 - uvicorn.error - [INFO] - Finished server process [14]
2025-05-19 14:22:37,039 - uvicorn.error - [INFO] - Started server process [17]
2025-05-19 14:22:37,039 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 14:22:37,039 - src.common.core.logging - [INFO] - start app
2025-05-19 14:22:37,085 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 14:22:37,085 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:22:37,086 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 14:22:37,086 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:22:37,087 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 14:22:37,087 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:22:37,088 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:22:37,092 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:22:37,092 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00027s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:22:37,095 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:22:37,095 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.00322s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:22:37,095 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:22:37,095 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003888s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:22:37,096 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:22:37,096 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.00445s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:22:37,097 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 14:22:37,097 - src.common.core.logging - [INFO] - mapping done
2025-05-19 14:22:37,098 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 14:22:38,840 - src.common.core.logging - [INFO] - Создание трека Popsa.
2025-05-19 14:22:38,841 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:22:38,857 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE false
2025-05-19 14:22:38,858 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00045s] ()
2025-05-19 14:22:38,863 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (_name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 14:22:38,863 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00023s] ('Pop',)
2025-05-19 14:22:38,864 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 14:22:38,865 - uvicorn.access - [INFO] - 172.20.0.1:47714 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 14:26:26,432 - uvicorn.error - [INFO] - Shutting down
2025-05-19 14:26:26,532 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 14:26:26,533 - src.common.core.logging - [INFO] - finish app
2025-05-19 14:26:26,533 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 14:26:26,533 - uvicorn.error - [INFO] - Finished server process [17]
2025-05-19 14:26:27,195 - uvicorn.error - [INFO] - Started server process [20]
2025-05-19 14:26:27,196 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 14:26:27,196 - src.common.core.logging - [INFO] - start app
2025-05-19 14:26:27,238 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 14:26:27,238 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:26:27,239 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 14:26:27,239 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:26:27,240 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 14:26:27,240 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:26:27,241 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:26:27,244 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:26:27,244 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00022s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:26:27,247 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:26:27,247 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003231s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:26:27,248 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:26:27,248 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.00386s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:26:27,248 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:26:27,248 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004418s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:26:27,249 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 14:26:27,249 - src.common.core.logging - [INFO] - mapping done
2025-05-19 14:26:27,249 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 14:26:30,710 - src.common.core.logging - [INFO] - Создание трека Popsa.
2025-05-19 14:26:30,711 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:26:30,719 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE genres._name = $1::VARCHAR
2025-05-19 14:26:30,719 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00033s] ('Pop',)
2025-05-19 14:26:30,724 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO tracks (_title, _album_id, _explicit) VALUES ($1::VARCHAR, $2::INTEGER, $3::BOOLEAN) RETURNING tracks.oid
2025-05-19 14:26:30,724 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00023s] ('Popsa', 1, True)
2025-05-19 14:26:30,725 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO track_genres (track_id, genre_id) VALUES ($1::INTEGER, $2::INTEGER)
2025-05-19 14:26:30,726 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00020s] (2, 1)
2025-05-19 14:26:30,727 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 14:26:30,735 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:26:30,737 - sqlalchemy.engine.Engine - [INFO] - SELECT tracks.oid, tracks._title, tracks._album_id, tracks._explicit 
FROM tracks 
WHERE tracks.oid = $1::INTEGER
2025-05-19 14:26:30,738 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00021s] (2,)
2025-05-19 14:26:30,739 - src.common.core.logging - [INFO] - Трек Popsa успешно создан.
2025-05-19 14:26:30,739 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 14:26:30,740 - uvicorn.access - [INFO] - 172.20.0.1:47094 - "POST /api/v1/api/v1/create_track HTTP/1.1" 200
2025-05-19 14:27:35,771 - src.common.core.logging - [INFO] - Создание трека Govno.
2025-05-19 14:27:35,771 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:27:35,772 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE genres._name = $1::VARCHAR
2025-05-19 14:27:35,772 - sqlalchemy.engine.Engine - [INFO] - [cached since 65.05s ago] ('Porn',)
2025-05-19 14:27:35,774 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (_name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 14:27:35,774 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00025s] ('Porn',)
2025-05-19 14:27:35,775 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE genres._name = $1::VARCHAR
2025-05-19 14:27:35,776 - sqlalchemy.engine.Engine - [INFO] - [cached since 65.06s ago] ('Shanson',)
2025-05-19 14:27:35,777 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (_name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 14:27:35,777 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003673s ago] ('Shanson',)
2025-05-19 14:27:35,778 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO tracks (_title, _album_id, _explicit) VALUES ($1::VARCHAR, $2::INTEGER, $3::BOOLEAN) RETURNING tracks.oid
2025-05-19 14:27:35,778 - sqlalchemy.engine.Engine - [INFO] - [cached since 65.05s ago] ('Govno', 22, True)
2025-05-19 14:27:35,779 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 14:27:35,780 - uvicorn.access - [INFO] - 172.20.0.1:47550 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 14:30:04,536 - uvicorn.error - [INFO] - Shutting down
2025-05-19 14:30:04,636 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 14:30:04,636 - src.common.core.logging - [INFO] - finish app
2025-05-19 14:30:04,637 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 14:30:04,637 - uvicorn.error - [INFO] - Finished server process [20]
2025-05-19 14:30:05,354 - uvicorn.error - [INFO] - Started server process [23]
2025-05-19 14:30:05,355 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 14:30:05,355 - src.common.core.logging - [INFO] - start app
2025-05-19 14:30:05,398 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 14:30:05,398 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:30:05,399 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 14:30:05,399 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:30:05,400 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 14:30:05,400 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:30:05,401 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:30:05,405 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:30:05,406 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00028s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:30:05,410 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:30:05,410 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004677s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:30:05,410 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:30:05,411 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005266s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:30:05,411 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:30:05,411 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005753s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:30:05,412 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 14:30:05,413 - src.common.core.logging - [INFO] - mapping done
2025-05-19 14:30:05,413 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 14:30:33,886 - uvicorn.error - [INFO] - Shutting down
2025-05-19 14:30:33,986 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 14:30:33,987 - src.common.core.logging - [INFO] - finish app
2025-05-19 14:30:33,987 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 14:30:33,987 - uvicorn.error - [INFO] - Finished server process [23]
2025-05-19 14:30:34,655 - uvicorn.error - [INFO] - Started server process [25]
2025-05-19 14:30:34,655 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 14:30:34,655 - src.common.core.logging - [INFO] - start app
2025-05-19 14:30:34,698 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 14:30:34,699 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:30:34,700 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 14:30:34,700 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:30:34,701 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 14:30:34,701 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:30:34,702 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:30:34,706 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:30:34,706 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00033s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:30:34,711 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:30:34,711 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004663s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:30:34,712 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:30:34,712 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.00562s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:30:34,712 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:30:34,713 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.006452s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:30:34,713 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 14:30:34,714 - src.common.core.logging - [INFO] - mapping done
2025-05-19 14:30:34,714 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 14:30:37,501 - src.common.core.logging - [INFO] - Создание трека Govno.
2025-05-19 14:30:37,502 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:30:37,509 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE genres._name = $1::VARCHAR
2025-05-19 14:30:37,509 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00023s] ('Porn',)
2025-05-19 14:30:37,512 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (_name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 14:30:37,513 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00016s] ('Porn',)
2025-05-19 14:30:37,514 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE genres._name = $1::VARCHAR
2025-05-19 14:30:37,514 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005455s ago] ('Shanson',)
2025-05-19 14:30:37,515 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 14:30:37,515 - uvicorn.access - [INFO] - 172.20.0.1:33048 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 14:30:37,516 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_track = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 31, in create_track
    result = await self.db.execute(select(Album).where(Album._album_id == track.album_id))
                                                       ^^^^^^^^^^^^^^^
AttributeError: type object 'Album' has no attribute '_album_id'
2025-05-19 14:30:45,243 - uvicorn.error - [INFO] - Shutting down
2025-05-19 14:30:45,344 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 14:30:45,344 - src.common.core.logging - [INFO] - finish app
2025-05-19 14:30:45,344 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 14:30:45,344 - uvicorn.error - [INFO] - Finished server process [25]
2025-05-19 14:30:46,075 - uvicorn.error - [INFO] - Started server process [28]
2025-05-19 14:30:46,075 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 14:30:46,075 - src.common.core.logging - [INFO] - start app
2025-05-19 14:30:46,122 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 14:30:46,122 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:30:46,123 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 14:30:46,123 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:30:46,124 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 14:30:46,124 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:30:46,125 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:30:46,129 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:30:46,129 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00032s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:30:46,132 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:30:46,132 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003262s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:30:46,133 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:30:46,133 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003924s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:30:46,134 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:30:46,134 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004518s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:30:46,134 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 14:30:46,135 - src.common.core.logging - [INFO] - mapping done
2025-05-19 14:30:46,135 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 14:30:47,290 - src.common.core.logging - [INFO] - Создание трека Govno.
2025-05-19 14:30:47,292 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:30:47,309 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE genres._name = $1::VARCHAR
2025-05-19 14:30:47,309 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00045s] ('Porn',)
2025-05-19 14:30:47,315 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (_name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 14:30:47,315 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00029s] ('Porn',)
2025-05-19 14:30:47,317 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE genres._name = $1::VARCHAR
2025-05-19 14:30:47,317 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.009062s ago] ('Shanson',)
2025-05-19 14:30:47,318 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 14:30:47,319 - uvicorn.access - [INFO] - 172.20.0.1:37172 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 14:30:47,319 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_track = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 31, in create_track
    result = await self.db.execute(select(Album).where(Album.album_id == track.album_id))
                                                       ^^^^^^^^^^^^^^
AttributeError: type object 'Album' has no attribute 'album_id'
2025-05-19 14:31:20,215 - uvicorn.error - [INFO] - Shutting down
2025-05-19 14:31:20,316 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 14:31:20,316 - src.common.core.logging - [INFO] - finish app
2025-05-19 14:31:20,316 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 14:31:20,317 - uvicorn.error - [INFO] - Finished server process [28]
2025-05-19 14:31:21,029 - uvicorn.error - [INFO] - Started server process [31]
2025-05-19 14:31:21,029 - uvicorn.error - [INFO] - Waiting for application startup.
2025-05-19 14:31:21,029 - src.common.core.logging - [INFO] - start app
2025-05-19 14:31:21,073 - sqlalchemy.engine.Engine - [INFO] - select pg_catalog.version()
2025-05-19 14:31:21,073 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:31:21,075 - sqlalchemy.engine.Engine - [INFO] - select current_schema()
2025-05-19 14:31:21,075 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:31:21,076 - sqlalchemy.engine.Engine - [INFO] - show standard_conforming_strings
2025-05-19 14:31:21,076 - sqlalchemy.engine.Engine - [INFO] - [raw sql] ()
2025-05-19 14:31:21,077 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:31:21,081 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:31:21,081 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00022s] ('genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:31:21,085 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:31:21,085 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003974s ago] ('albums', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:31:21,085 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:31:21,085 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.004719s ago] ('tracks', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:31:21,086 - sqlalchemy.engine.Engine - [INFO] - SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = $1::VARCHAR AND pg_catalog.pg_class.relkind = ANY (ARRAY[$2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::VARCHAR]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != $7::VARCHAR
2025-05-19 14:31:21,086 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.005777s ago] ('track_genres', 'r', 'p', 'f', 'v', 'm', 'pg_catalog')
2025-05-19 14:31:21,088 - sqlalchemy.engine.Engine - [INFO] - COMMIT
2025-05-19 14:31:21,089 - src.common.core.logging - [INFO] - mapping done
2025-05-19 14:31:21,089 - uvicorn.error - [INFO] - Application startup complete.
2025-05-19 14:31:21,907 - src.common.core.logging - [INFO] - Создание трека Govno.
2025-05-19 14:31:21,908 - sqlalchemy.engine.Engine - [INFO] - BEGIN (implicit)
2025-05-19 14:31:21,914 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE genres._name = $1::VARCHAR
2025-05-19 14:31:21,915 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00021s] ('Porn',)
2025-05-19 14:31:21,919 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (_name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 14:31:21,919 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00024s] ('Porn',)
2025-05-19 14:31:21,921 - sqlalchemy.engine.Engine - [INFO] - SELECT genres.id, genres._name 
FROM genres 
WHERE genres._name = $1::VARCHAR
2025-05-19 14:31:21,921 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.006792s ago] ('Shanson',)
2025-05-19 14:31:21,922 - sqlalchemy.engine.Engine - [INFO] - INSERT INTO genres (_name) VALUES ($1::VARCHAR) RETURNING genres.id
2025-05-19 14:31:21,922 - sqlalchemy.engine.Engine - [INFO] - [cached since 0.003316s ago] ('Shanson',)
2025-05-19 14:31:21,924 - sqlalchemy.engine.Engine - [INFO] - SELECT albums.oid, albums._title, albums._owner_id, albums._release_date 
FROM albums 
WHERE albums.oid = $1::INTEGER
2025-05-19 14:31:21,924 - sqlalchemy.engine.Engine - [INFO] - [generated in 0.00014s] (22,)
2025-05-19 14:31:21,925 - sqlalchemy.engine.Engine - [INFO] - ROLLBACK
2025-05-19 14:31:21,926 - uvicorn.access - [INFO] - 172.20.0.1:43288 - "POST /api/v1/api/v1/create_track HTTP/1.1" 500
2025-05-19 14:31:21,926 - uvicorn.error - [ERROR] - Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/usr/local/lib/python3.13/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/api/v1/writer.py", line 33, in create_track
    created_track = await track_repo.create_track(track)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/src/src/common/repository/track.py", line 34, in create_track
    raise NoSuchAlbumException()
src.common.exceptions.exceptions.NoSuchAlbumException: Запрашиваемый альбом не найден
2025-05-19 14:31:37,226 - uvicorn.error - [INFO] - Shutting down
2025-05-19 14:31:37,326 - uvicorn.error - [INFO] - Waiting for application shutdown.
2025-05-19 14:31:37,327 - src.common.core.logging - [INFO] - finish app
2025-05-19 14:31:37,327 - uvicorn.error - [INFO] - Application shutdown complete.
2025-05-19 14:31:37,327 - uvicorn.error - [INFO] - Finished server process [31]
